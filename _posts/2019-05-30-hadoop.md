---
layout: post
title:  "hadoop 笔记"
date:   2019-05-30 09:31:01 +0800
categories: linux
tag: hadoop
---

* content
{:toc}

#### hadoop

#### NameNode
1. 基于内存：不会和磁盘进行交换
	- 只存内存
	- 持久化（单向）

2. 主要功能：
	- 接受客户端的读写服务
	- 手机DataNode汇报的Block列表信息

3. NameNode保存metadata信息包括
 	- 文件owership和permissions
 	- 文件大小，时间
 	- Block偏移量
 	- Block每个副本的位置，（DataNode上报）

#### NameNode
- NameNode的metadata信息在启动会加载到内存
- metadata存储到磁盘文件名为”fsimage“（时点备份）
- Block的信息位置不会保存到fsimage
- edits记录对metadata的操作日志>redis
- 二者的产生时间和过程?

#### SecondaryNameNode(SNN)
- 主要做一个fsimage和edits合并的操作

#### HDFS优点
- 高容错性
	- 数据自动保存多个副本
	- 副本丢失后，自动回复
-适合批处理
	- 移动机损而非数据
	- 数据位置暴露给计算框架
- 适合大数据处理
	- GB，TB甚至TP级数据
	-百万规模以上的文件数量
	-10K+节点
- 可构建在廉价机器上
 	-通过多副本提高可靠性
 	-提供容错和恢复机制

#### HDFS缺点
 - 低延迟数据访问
 - 小文件存取
 	- 占用NameNode大量内存
 	- 寻到时间超过读取时间
 - 并发写入，文件随机修改
 	- 一个文件只能有一个写者
 	- 仅支持append

#### hadoop2.0 产生背景
NameNode单点故障 high availability
NameNode压力过大，且内存受限制 federation
zkfc failoverControllerActive
